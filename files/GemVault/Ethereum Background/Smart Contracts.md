Participants don't write a snippet of code everytime they want to process a transaction in the EVM. Instead, developers upload smart contracts into the EVM state, and users make requests to execute these snippets with different parameters. 

A good allegory for a smart contract is that it is a vending machine: a script that, when given certain parameters, performs computation if certain conditions are satisfied.

Any developer can make a smart contract, and any user can use a smart contract, but in both cases a fee has to be paid to the network to execute/upload the code.